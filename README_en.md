# Content Manager CLI

[![npm version](https://badge.fury.io/js/content-manager-cli.svg)](https://badge.fury.io/js/content-manager-cli)

A lightweight CLI tool for managing Markdown content and metadata organized by categories.

Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Installation](#installation)
- [Quick Start](#quick-start)
- [Commands](#commands)
- [Configuration File (content.config.json)](#configuration-file-contentconfigjson)
- [Development & Build](#development--build)
- [Contributing](#contributing)
- [License](#license)

## Overview

Content Manager CLI is a command-line tool for creating, managing, and exporting Markdown content and metadata organized by categories. It's ideal for managing content for static sites and organizing documentation.

## Features

- Flexible directory structure generation and management (combinations of category, date, title, etc.).
- Manage Markdown files with metadata (front-matter).
- Collect metadata from content and generate an index file like content.meta.json.
- Auxiliary functionality to generate a workflow (.github/workflows/content-gh-pages.yml) for publishing to GitHub Pages.

## Installation

Node.js (LTS recommended) is required.

For global installation:

```bash
npm install -g content-manager-cli
```

The package is intended to publish executable files built in the dist directory. If running from source, refer to the build instructions below.

## Quick Start

1. Create and navigate to a project folder.

```bash
mkdir my-project
cd my-project
```

2. Initialize the content (creates a content directory by default).

```bash
content init
```

3. Create new content (example: category news, title my-first-post).

```bash
# Creates ./content/news/my-first-post/index.md
content create content -s c/t -c news -t "my-first-post"
```

4. Build metadata and generate content.meta.json.

```bash
content build content --target c -c news
```

## Commands

Overview of main commands and representative options. For details, see `content <command> --help`.

- content init [contentDir]
  - contentDir: Directory to initialize (default: content).
  - -c, --content-name <name>: Specify content project name.
  - -a, --author <name>: Set author name.
  - -l, --lang <lang>: Specify default language code (e.g., ja, en).
  - -f, --file-patterns <patterns>: Specify target file patterns (comma-separated).

- content create <contentDir>
  - <contentDir>: Specify directory containing content.config.json.
  - -s, --structure <structure>: Directory structure template (e.g., c/t is category/title).
  - -c, --category <category>: Category name (required if structure includes category).
  - -d, --date [date]: Creation date (YYYY-MM-DD or today).
  - -t, --title [title]: Title (default: untitled).
  - -f, --filename [filename]: Filename (default: index).
  - --force: Overwrite existing files.

- content build <contentDir>
  - <contentDir>: Specify directory containing content.config.json.
  - --target <structure>: Specify output target to a single directory.
  - -c, --category <category>: Target only the specified category.
  - --pretty: Format and write output JSON.

- content gh-pages <contentDir>
  - Generate a publishing workflow for GitHub Pages.
  - -b, --branch <branch>: Deploy target branch (default: main).
  - -d, --build-dir <dir>: Specify directory containing build artifacts.
  - -r, --ext-repo <repo>: Use when specifying an external repository.
  - --force: Overwrite existing workflow.

## Configuration File (content.config.json)

Sample configuration file generated by `content init`. Edit fields as needed for your operation.

```json
{
  "contentDir": "content",
  "contentName": "content",
  "metaIndexFile": "content.meta.json",
  "defaultMeta": {
    "lang": "ja",
    "author": ""
  },
  "filePatterns": ["**/*.md", "**/*.txt", "**/*.html"],
  "structures": []
}
```

## Development & Build

This repository is implemented in TypeScript. To run from source for development, build before execution.

```bash
# Install dependencies
npm install

# Build
npm run build

# Execute commands using locally built files
node ./dist/index.js --help
```

To execute TypeScript directly during development, use tsx or similar tools.

## Contributing

Bug reports, feature suggestions, and PRs are welcome.

1. Fork the repository.
2. Create a branch (e.g., feature/your-feature).
3. Commit your changes.
4. Push and create a pull request.

Please follow this commit message format:

<type>: <summary> [#Issue number / refs #Issue number]

Example:
```
fix: Add language detection logic [refs #1]
```

## License

This project is published under the MIT License.
